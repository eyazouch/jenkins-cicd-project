---
- name: D√©ploiement de l'application web
  hosts: localhost
  connection: local
  become: false
  
  vars:
    app_name: "jenkins-cicd-app"
    deploy_path: "/tmp/deploy-jenkins-app"
    source_path: "{{ playbook_dir }}"
  
  tasks:
    - name: Afficher le d√©but du d√©ploiement
      debug:
        msg: "üöÄ D√©but du d√©ploiement de {{ app_name }}"
    
    - name: Cr√©er le r√©pertoire de d√©ploiement
      file:
        path: "{{ deploy_path }}"
        state: directory
        mode: '0755'
    
    - name: D√©ployer index.html
      copy:
        src: "{{ source_path }}/index.html"
        dest: "{{ deploy_path }}/index.html"
        mode: '0644'
    
    - name: D√©ployer style.css
      copy:
        src: "{{ source_path }}/style.css"
        dest: "{{ deploy_path }}/style.css"
        mode: '0644'
    
    - name: V√©rifier les fichiers d√©ploy√©s
      find:
        paths: "{{ deploy_path }}"
        patterns: "*.html,*.css"
      register: deployed_files
    
    - name: Afficher les fichiers d√©ploy√©s
      debug:
        msg: "‚úÖ Fichier d√©ploy√© : {{ item.path }}"
      loop: "{{ deployed_files.files }}"
    
    - name: Confirmer le d√©ploiement
      debug:
        msg: "‚úÖ D√©ploiement termin√© avec succ√®s dans {{ deploy_path }}"